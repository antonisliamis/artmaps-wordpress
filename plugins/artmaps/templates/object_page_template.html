<script type="text/javascript">
google.maps.visualRefresh = true;
jQuery(function($) {
    
    ArtMapsConfig = ArtMapsConfig || {};
    ArtMapsConfig.ObjectID = "{$objectID}";
    
    var config = {
        "map": {
            "center": new google.maps.LatLng(51.507854, -0.099462) /* Tate Britain */
        }
    };
    var map = new ArtMaps.Object.MapObject($("#artmaps-object-map"), config);
    
    (function() {
        var autocomplete = $("#artmaps-object-map-autocomplete");
        map.bindAutocomplete(new google.maps.places.Autocomplete(autocomplete.get(0)));
        map.addControl(autocomplete.get(0), google.maps.ControlPosition.RIGHT_BOTTOM);
        
        var suggest = $("#artmaps-object-map-suggest");
        if(ArtMapsConfig.IsUserLoggedIn) {
            suggest.click(function() {
               map.suggest(); 
            });
            map.addControl(suggest.get(0), google.maps.ControlPosition.LEFT_TOP);
        } else {
            suggest.hide();
        }
        
        var showall = $("#artmaps-object-map-showall");
        showall.click(function() {
           map.reset(); 
        });
        map.addControl(showall.get(0), google.maps.ControlPosition.LEFT_TOP);
        
        $("a").filter(function() {
            var e = $(this);
            return e.text() == "The Map";
        }).text("Back To The Map");
    })();
});
</script>
<div id="artmaps-object-metadata">
    {if isset($metadata->imageurl)}
    <img src="{$metadata->imageurl}" alt="{$metadata->title}" />
    {else}
    <img src="{'/content/unavailable.jpg'|artmapsUri}" alt="{$metadata->title}" />
    {/if}
    <p>Artist: {$metadata->artist} {$metadata->artistdate}</p>
    <p>Title: {$metadata->title}</p>
    <p>Date: {$metadata->artworkdate}</p>
    <p><a href="http://www.tate.org.uk/art/artworks/{$metadata->reference}">You will find more information at Tate Online</a></p>
</div>

<div id="artmaps-object-map" style="width:100%; height:400px;"></div>

<button id="artmaps-object-map-showall" type="button">Show All Suggestions</button>

<button id="artmaps-object-map-suggest" type="button">Suggest A Location</button>

<input id="artmaps-object-map-autocomplete" type="text" />

<div>
    <span><img src="{'content/pins/red.jpg'|artmapsUri}" alt="" />Original Location</span>
    <span><img src="{'content/pins/blue.jpg'|artmapsUri}" alt="" />Suggested Location</span>
    <span><img src="{'content/pins/purple.jpg'|artmapsUri}" alt="" />Your Suggestion</span>
    <span><img src="{'content/pins/green.jpg'|artmapsUri}" alt="" />Your Active Suggestion</span>
</div>

<div id="artmaps-object-suggestion-message" style="display: none;">
    <p>
        Thank you, your suggested location has been added and awaits confirmation.<br />
        Once others have confirmed the location, it will become part of Tate collection data.<br />
        Would you like to <span class="artmaps-button" id="artmaps-object-suggestion-message-comment-button">
        comment</span> on your suggestion? 
    </p>
</div>

