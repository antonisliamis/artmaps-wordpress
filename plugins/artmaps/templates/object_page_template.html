<script type="text/javascript">
google.maps.visualRefresh = true;
jQuery(function($) {
    
    ArtMapsConfig = ArtMapsConfig || {};
    ArtMapsConfig.ObjectID = "{$objectID}";
    
    var config = {
        "map": {
            "center": new google.maps.LatLng(51.507854, -0.099462) /* Tate Britain */
        }
    };
    var map = new ArtMaps.Object.MapObject($("#artmaps-object-map"), config);
    
    (function() {
        var autocomplete = $("#artmaps-object-map-autocomplete");
        map.bindAutocomplete(new google.maps.places.Autocomplete(autocomplete.get(0)));
        map.addControl(autocomplete.get(0), google.maps.ControlPosition.RIGHT_BOTTOM);
        
        var suggest = $("#artmaps-object-map-suggest");
        if(ArtMapsConfig.IsUserLoggedIn) {
            suggest.click(function() {
               map.suggest(); 
            });
            map.addControl(suggest.get(0), google.maps.ControlPosition.LEFT_TOP);
        } else {
            suggest.hide();
        }
        
        var showall = $("#artmaps-object-map-showall");
        showall.click(function() {
           map.reset(); 
        });
        map.addControl(showall.get(0), google.maps.ControlPosition.LEFT_TOP);
        
        $("a").filter(function() {
            var e = $(this);
            return e.text() == "The Map";
        }).text("Back To The Map");
    })();
});
</script>
<div id="artmaps-object-metadata">
    {if isset($metadata->imageurl)}
    <img src="{$metadata->imageurl}" alt="{$metadata->title}" />
    {else}
    <img src="{'/content/unavailable.jpg'|artmapsUri}" alt="{$metadata->title}" />
    {/if}
    <p><b>Artist:</b> {$metadata->artist} {$metadata->artistdate}</p>
    <p><b>Title:</b> {$metadata->title}</p>
    <p><b>Date:</b> {$metadata->artworkdate}</p>
    <p><a href="http://www.tate.org.uk/art/artworks/{$metadata->reference}">You will find more information at Tate Online</a></p>
    <p style="clear:both;">&nbsp;</p>
</div>
<div id="artmaps-object-map" style="width:100%; height:400px;"></div>

<button id="artmaps-object-map-showall" type="button">Show All Suggestions</button>

<button id="artmaps-object-map-suggest" type="button">Suggest A Location</button>

<input id="artmaps-object-map-autocomplete" type="text" />

<div id="artmaps-object-map-key">
    <span><img src="{'content/pins/darkblue.jpg'|artmapsUri}" alt="" />The location of the artwork that has been accepted by us as accurate</span><br/>
    <span><img src="{'content/pins/red.jpg'|artmapsUri}" alt="" />The original location from our records</span><br />
    <span><img src="{'content/pins/blue.jpg'|artmapsUri}" alt="" />A location suggested by a member of the public</span><br />
    <span><img src="{'content/pins/purple.jpg'|artmapsUri}" alt="" />A location suggested by you</span><br />
    <span><img src="{'content/pins/green.jpg'|artmapsUri}" alt="" />A location that you are in the process of submitting</span>
</div>

<div id="artmaps-object-suggestion-message" style="display: none;">
    <p>
        Your suggested location has been added and awaits confirmation.<br />
        Once others have confirmed the location, it will become part of Tate collection data.
    </p>
    <br />
    <h2>Further actions</h2>
    <ul id="artmaps-object-suggestion-message-other-actions">
        <li>
            <span class="artmaps-button" 
                    id="artmaps-object-suggestion-message-comment-button">
                Comment</span> on your suggestion
        </li>
    </ul>
    
</div>

